schema: '2.0'
stages:
  preprocess:
    cmd: python src/data/make_dataset.py
    deps:
    - path: data/raw/insurance.csv
      hash: md5
      md5: fab0de8ef9286cf3ff04e96d0393a771
      size: 50514
      isexec: true
    - path: src/data/make_dataset.py
      hash: md5
      md5: 46829799253f6473b3cf3cded13f613f
      size: 2414
      isexec: true
    params:
      config/params.yaml:
        base:
          random_state: 42
          test_size: 0.2
          root_project_dir: /mnt/c/Jupyter-projects/mag_ML
        data:
          raw_dataset_csv: data/raw/insurance.csv
          processed_dataset_csv: data/processed/insurance_processed.csv
          dataset_x_path_np: data/processed/data_x.npy
          dataset_y_path_np: data/processed/data_y.npy
          train_path: data/processed/train.csv
          test_path: data/processed/test.csv
          target_column: charges
    outs:
    - path: data/processed/data_x.npy
      hash: md5
      md5: 1ad47103afa72d0ab6ad8e469795d86a
      size: 109600
      isexec: true
    - path: data/processed/data_y.npy
      hash: md5
      md5: 4b06fb1246844baaea1f2ad5a2c03102
      size: 10080
      isexec: true
    - path: data/processed/insurance_processed.csv
      hash: md5
      md5: ffedfffb8cab9b2501f1d5292274b2e1
      size: 101694
      isexec: true
    - path: data/processed/test.csv
      hash: md5
      md5: e2e4a886b947647f0bc0e53783437382
      size: 20469
      isexec: true
    - path: data/processed/train.csv
      hash: md5
      md5: b0affc53ed388acdce2e337ac6d84beb
      size: 81353
      isexec: true
  train_linear:
    cmd: python src/models/train_linear.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: e2e4a886b947647f0bc0e53783437382
      size: 20469
      isexec: true
    - path: data/processed/train.csv
      hash: md5
      md5: b0affc53ed388acdce2e337ac6d84beb
      size: 81353
      isexec: true
    - path: src/models/train_linear.py
      hash: md5
      md5: da4e6968e85fc26e4aea5bd85f03e02b
      size: 3200
      isexec: true
    params:
      config/params.yaml:
        base:
          random_state: 42
          test_size: 0.2
          root_project_dir: /mnt/c/Jupyter-projects/mag_ML
        models.linear:
          n_jobs:
    outs:
    - path: dvclive/linear/metrics.json
      hash: md5
      md5: 7fe0e407503106f64000e2b58a82a3ce
      size: 126
      isexec: true
    - path: dvclive/linear/plots
      hash: md5
      md5: d235a1c9355d09642c895cd3145c72a1.dir
      size: 88
      nfiles: 3
    - path: models/linear.pkl
      hash: md5
      md5: b2f7766550a9deacf08791bee12a1d6a
      size: 1201
      isexec: true
    - path: reports/figures/linear_coefficients.png
      hash: md5
      md5: 0366afbe3875c059c6374a48df619ccf
      size: 25707
      isexec: true
    - path: reports/linear_coefficients.json
      hash: md5
      md5: e234bab51ad094197d711b3e54dec431
      size: 394
      isexec: true
  train_decision_tree:
    cmd: python src/models/train_decision_tree.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: e2e4a886b947647f0bc0e53783437382
      size: 20469
      isexec: true
    - path: data/processed/train.csv
      hash: md5
      md5: b0affc53ed388acdce2e337ac6d84beb
      size: 81353
      isexec: true
    - path: src/models/train_decision_tree.py
      hash: md5
      md5: 5d966426641153f5932159339ad10640
      size: 2721
      isexec: true
    params:
      config/params.yaml:
        base:
          random_state: 42
          test_size: 0.2
          root_project_dir: /mnt/c/Jupyter-projects/mag_ML
        models.decision_tree:
          criterion: squared_error
          max_depth: 10
          min_samples_split: 2
          min_samples_leaf: 3
          random_state: 42
    outs:
    - path: dvclive/decision_tree/metrics.json
      hash: md5
      md5: 00a13cc78e22d5ca2b7ea0b85b1c1e6f
      size: 127
      isexec: true
    - path: dvclive/decision_tree/plots
      hash: md5
      md5: 4861b86bf5a4f7014270b7ba570919d2.dir
      size: 89
      nfiles: 3
    - path: models/decision_tree.pkl
      hash: md5
      md5: a7a72f7cb38f3cbcef58d4929d9e6f98
      size: 33409
      isexec: true
    - path: reports/figures/decision_tree_structure.png
      hash: md5
      md5: 9f5da601823c04319f74d5a6b73c9f42
      size: 53426
      isexec: true
  train_catboost:
    cmd: python src/models/train_catboost.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: e2e4a886b947647f0bc0e53783437382
      size: 20469
      isexec: true
    - path: data/processed/train.csv
      hash: md5
      md5: b0affc53ed388acdce2e337ac6d84beb
      size: 81353
      isexec: true
    - path: src/models/train_catboost.py
      hash: md5
      md5: abdce5884f9cfbb132a661344d0d04fa
      size: 2680
      isexec: true
    params:
      config/params.yaml:
        base:
          random_state: 42
          test_size: 0.2
          root_project_dir: /mnt/c/Jupyter-projects/mag_ML
        models.catboost:
          iterations: 300
          depth: 4
          learning_rate: 0.05
          loss_function: RMSE
          verbose: false
          random_seed: 42
    outs:
    - path: dvclive/catboost/metrics.json
      hash: md5
      md5: 38cae8430e87e10ed26d087066bbc06c
      size: 125
      isexec: true
    - path: dvclive/catboost/plots
      hash: md5
      md5: 818981007eb466ce0efc3c768b9ebbac.dir
      size: 87
      nfiles: 3
    - path: models/catboost.cbm
      hash: md5
      md5: 32e4d2af5d599a261b3254250fa23ae5
      size: 104392
      isexec: true
    - path: reports/figures/catboost_feature_importance.png
      hash: md5
      md5: c87f9bd12fd7ffb1d3925ec7a6db543a
      size: 8143
      isexec: true
  train_xgboost:
    cmd: python src/models/train_xgboost.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: e2e4a886b947647f0bc0e53783437382
      size: 20469
      isexec: true
    - path: data/processed/train.csv
      hash: md5
      md5: b0affc53ed388acdce2e337ac6d84beb
      size: 81353
      isexec: true
    - path: src/models/train_xgboost.py
      hash: md5
      md5: 65930d91a26bbac4ce0fda4d21f23b2c
      size: 2657
      isexec: true
    params:
      config/params.yaml:
        base:
          random_state: 42
          test_size: 0.2
          root_project_dir: /mnt/c/Jupyter-projects/mag_ML
        models.xgboost:
          n_estimators: 200
          learning_rate: 0.05
          max_depth: 10
          subsample: 0.8
          colsample_bytree: 0.75
          random_state: 42
    outs:
    - path: dvclive/xgboost/metrics.json
      hash: md5
      md5: 4a24dcbad4fd65b418a34a4cc18ef76c
      size: 127
      isexec: true
    - path: dvclive/xgboost/plots
      hash: md5
      md5: 33ef9b1efdec2ca4a7558ba4d5476643.dir
      size: 89
      nfiles: 3
    - path: models/xgboost.json
      hash: md5
      md5: e73ee574f64143572a02e081889c0f95
      size: 2489488
      isexec: true
    - path: reports/figures/xgboost_feature_importance.png
      hash: md5
      md5: f533d3ff836228132f5ccf8210643b2a
      size: 9131
      isexec: true
