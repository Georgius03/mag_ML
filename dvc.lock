schema: '2.0'
stages:
  preprocess:
    cmd: python src/data/make_dataset.py
    deps:
    - path: config/params.yaml
      hash: md5
      md5: 56205565f888ad4abb3720aa2424fff2
      size: 1183
      isexec: true
    - path: data/raw/insurance.csv
      hash: md5
      md5: fab0de8ef9286cf3ff04e96d0393a771
      size: 50514
      isexec: true
    - path: src/data/make_dataset.py
      hash: md5
      md5: 46829799253f6473b3cf3cded13f613f
      size: 2414
      isexec: true
    outs:
    - path: data/processed/test.csv
      hash: md5
      md5: e2e4a886b947647f0bc0e53783437382
      size: 20469
      isexec: true
    - path: data/processed/train.csv
      hash: md5
      md5: b0affc53ed388acdce2e337ac6d84beb
      size: 81353
      isexec: true
  train_linear:
    cmd: python src/models/train_linear.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: e2e4a886b947647f0bc0e53783437382
      size: 20469
      isexec: true
    - path: data/processed/train.csv
      hash: md5
      md5: b0affc53ed388acdce2e337ac6d84beb
      size: 81353
      isexec: true
    - path: src/models/train_linear.py
      hash: md5
      md5: 2d2a4de326d8ca8890efc4ceacc0dbd3
      size: 2617
      isexec: true
    params:
      config/params.yaml:
        base:
          random_state: 42
          test_size: 0.2
          root_project_dir: /mnt/c/Jupyter-projects/mag_ML
        data:
          raw_dataset_csv: data/raw/insurance.csv
          processed_dataset_csv: data/processed/insurance_processed.csv
          dataset_x_path_np: data/processed/data_x.npy
          dataset_y_path_np: data/processed/data_y.npy
          train_path: data/processed/train.csv
          test_path: data/processed/test.csv
          target_column: charges
        models:
          models_path: models/
          linear:
            n_jobs:
          decision_tree:
            criterion: squared_error
            max_depth: 5
            min_samples_split: 2
            min_samples_leaf: 1
            random_state: 42
          xgboost:
            n_estimators: 200
            learning_rate: 0.05
            max_depth: 4
            subsample: 0.8
            colsample_bytree: 0.8
            random_state: 42
          catboost:
            iterations: 300
            depth: 6
            learning_rate: 0.05
            loss_function: RMSE
            verbose: false
            random_seed: 42
          ann:
            hidden_dim: 64
            epochs: 100
            lr: 0.001
            batch_size: 32
            weight_decay: 0.0
            random_state: 42
        reports:
          ydata_report_path: reports/ydata_report.html
          dvclive_path: reports/live/
          metrics_path: reports/metrics/
    outs:
    - path: dvclive/linear/metrics.json
      hash: md5
      md5: 7fe0e407503106f64000e2b58a82a3ce
      size: 126
      isexec: true
    - path: dvclive/linear/plots
      hash: md5
      md5: d235a1c9355d09642c895cd3145c72a1.dir
      size: 88
      nfiles: 3
    - path: models/linear.pkl
      hash: md5
      md5: b2f7766550a9deacf08791bee12a1d6a
      size: 1201
      isexec: true
  train_decision_tree:
    cmd: python src/models/train_decision_tree.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: e2e4a886b947647f0bc0e53783437382
      size: 20469
      isexec: true
    - path: data/processed/train.csv
      hash: md5
      md5: b0affc53ed388acdce2e337ac6d84beb
      size: 81353
      isexec: true
    - path: src/models/train_decision_tree.py
      hash: md5
      md5: bbfe97c3dfea853017c053343ae81d05
      size: 2666
      isexec: true
    params:
      config/params.yaml:
        base:
          random_state: 42
          test_size: 0.2
          root_project_dir: /mnt/c/Jupyter-projects/mag_ML
        data:
          raw_dataset_csv: data/raw/insurance.csv
          processed_dataset_csv: data/processed/insurance_processed.csv
          dataset_x_path_np: data/processed/data_x.npy
          dataset_y_path_np: data/processed/data_y.npy
          train_path: data/processed/train.csv
          test_path: data/processed/test.csv
          target_column: charges
        models:
          models_path: models/
          linear:
            n_jobs:
          decision_tree:
            criterion: squared_error
            max_depth: 5
            min_samples_split: 2
            min_samples_leaf: 1
            random_state: 42
          xgboost:
            n_estimators: 200
            learning_rate: 0.05
            max_depth: 4
            subsample: 0.8
            colsample_bytree: 0.8
            random_state: 42
          catboost:
            iterations: 300
            depth: 6
            learning_rate: 0.05
            loss_function: RMSE
            verbose: false
            random_seed: 42
          ann:
            hidden_dim: 64
            epochs: 100
            lr: 0.001
            batch_size: 32
            weight_decay: 0.0
            random_state: 42
        reports:
          ydata_report_path: reports/ydata_report.html
          dvclive_path: reports/live/
          metrics_path: reports/metrics/
    outs:
    - path: dvclive/decision_tree/metrics.json
      hash: md5
      md5: 79e3f03a596527d9ff7b25901db53d3a
      size: 126
      isexec: true
    - path: dvclive/decision_tree/plots
      hash: md5
      md5: f84d4143e6a158998259f899cb40bae1.dir
      size: 88
      nfiles: 3
    - path: models/decision_tree.pkl
      hash: md5
      md5: 08660f53ff93e4aac3845177e7576e44
      size: 6049
      isexec: true
    - path: reports/figures/decision_tree_structure.png
      hash: md5
      md5: 5e52ef2191e621f675b72ec29ba8ee84
      size: 53398
      isexec: true
  train_catboost:
    cmd: python src/models/train_catboost.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: e2e4a886b947647f0bc0e53783437382
      size: 20469
      isexec: true
    - path: data/processed/train.csv
      hash: md5
      md5: b0affc53ed388acdce2e337ac6d84beb
      size: 81353
      isexec: true
    - path: src/models/train_catboost.py
      hash: md5
      md5: 52ab24d852eb320f3c7135454f7a50cb
      size: 2641
      isexec: true
    params:
      config/params.yaml:
        base:
          random_state: 42
          test_size: 0.2
          root_project_dir: /mnt/c/Jupyter-projects/mag_ML
        data:
          raw_dataset_csv: data/raw/insurance.csv
          processed_dataset_csv: data/processed/insurance_processed.csv
          dataset_x_path_np: data/processed/data_x.npy
          dataset_y_path_np: data/processed/data_y.npy
          train_path: data/processed/train.csv
          test_path: data/processed/test.csv
          target_column: charges
        models:
          models_path: models/
          linear:
            n_jobs:
          decision_tree:
            criterion: squared_error
            max_depth: 5
            min_samples_split: 2
            min_samples_leaf: 1
            random_state: 42
          xgboost:
            n_estimators: 200
            learning_rate: 0.05
            max_depth: 4
            subsample: 0.8
            colsample_bytree: 0.8
            random_state: 42
          catboost:
            iterations: 300
            depth: 6
            learning_rate: 0.05
            loss_function: RMSE
            verbose: false
            random_seed: 42
          ann:
            hidden_dim: 64
            epochs: 100
            lr: 0.001
            batch_size: 32
            weight_decay: 0.0
            random_state: 42
        reports:
          ydata_report_path: reports/ydata_report.html
          dvclive_path: reports/live/
          metrics_path: reports/metrics/
    outs:
    - path: dvclive/catboost/metrics.json
      hash: md5
      md5: 74d0b3ea4161878d4bb457b4ba90ce30
      size: 126
      isexec: true
    - path: dvclive/catboost/plots
      hash: md5
      md5: a93fe4d9733c3cfaa72d55d5940d16f5.dir
      size: 88
      nfiles: 3
    - path: models/catboost.cbm
      hash: md5
      md5: 1274ede80e3f32069da70cb28396ad6c
      size: 325840
      isexec: true
    - path: reports/figures/catboost_feature_importance.png
      hash: md5
      md5: 2e774e724a81747f5f671819bfdd1190
      size: 8157
      isexec: true
  train_xgboost:
    cmd: python src/models/train_xgboost.py
    deps:
    - path: data/processed/test.csv
      hash: md5
      md5: e2e4a886b947647f0bc0e53783437382
      size: 20469
      isexec: true
    - path: data/processed/train.csv
      hash: md5
      md5: b0affc53ed388acdce2e337ac6d84beb
      size: 81353
      isexec: true
    - path: src/models/train_xgboost.py
      hash: md5
      md5: 66c6ca0eccd525fb2ef8f5e5669c35c1
      size: 2618
      isexec: true
    params:
      config/params.yaml:
        base:
          random_state: 42
          test_size: 0.2
          root_project_dir: /mnt/c/Jupyter-projects/mag_ML
        data:
          raw_dataset_csv: data/raw/insurance.csv
          processed_dataset_csv: data/processed/insurance_processed.csv
          dataset_x_path_np: data/processed/data_x.npy
          dataset_y_path_np: data/processed/data_y.npy
          train_path: data/processed/train.csv
          test_path: data/processed/test.csv
          target_column: charges
        models:
          models_path: models/
          linear:
            n_jobs:
          decision_tree:
            criterion: squared_error
            max_depth: 5
            min_samples_split: 2
            min_samples_leaf: 1
            random_state: 42
          xgboost:
            n_estimators: 200
            learning_rate: 0.05
            max_depth: 4
            subsample: 0.8
            colsample_bytree: 0.8
            random_state: 42
          catboost:
            iterations: 300
            depth: 6
            learning_rate: 0.05
            loss_function: RMSE
            verbose: false
            random_seed: 42
          ann:
            hidden_dim: 64
            epochs: 100
            lr: 0.001
            batch_size: 32
            weight_decay: 0.0
            random_state: 42
        reports:
          ydata_report_path: reports/ydata_report.html
          dvclive_path: reports/live/
          metrics_path: reports/metrics/
    outs:
    - path: dvclive/xgboost/metrics.json
      hash: md5
      md5: 97caf83645782046f12cc118ca6f45fd
      size: 128
      isexec: true
    - path: dvclive/xgboost/plots
      hash: md5
      md5: 30ed5b8a3fcf36d5aa94a13765e73bdf.dir
      size: 90
      nfiles: 3
    - path: models/xgboost.json
      hash: md5
      md5: ba28ed71f9d4144118871260bf04c7bb
      size: 313515
      isexec: true
    - path: reports/figures/xgboost_feature_importance.png
      hash: md5
      md5: 83d1f9e9dd880d5e8ed04dba8a20fe0d
      size: 9118
      isexec: true
